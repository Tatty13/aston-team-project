(()=>{"use strict";var e,r,t,n={940:(e,r,t)=>{var n=t(745),a=t(998),s=t(655),o=t(42),i=(t(55),t(294)),c=t(335),l=()=>(0,a.I0)(),u=a.v9,d=t(791),h=t(168),v=(0,h.oM)({name:"auth",initialState:{statusAuth:"LOADING",email:null,uid:""},reducers:{setAuthUser(e,r){e.email=r.payload.email,e.uid=r.payload.uid,e.statusAuth="SUCCESS"},userNotFound(e){e.email=null,e.uid="",e.statusAuth="SUCCESS"}}}),{setAuthUser:f,userNotFound:p}=v.actions;const m=v.reducer;var j=(0,h.oM)({name:"cards",initialState:{cardsData:[],saveCardsData:[]},reducers:{replaceCards(e,r){e.cardsData=r.payload},addMoreCards(e,r){e.cardsData.push(...r.payload)},removeCards(e){e.cardsData=[]}}}),{replaceCards:y,addMoreCards:g,removeCards:b}=j.actions;const x=j.reducer;var O=(0,h.oM)({name:"search",initialState:{searchValue:"",countPerPage:30,totalPages:0},reducers:{setSearchValue(e,r){e.searchValue=r.payload},resetSearch(e){e.searchValue=""},setTotalPages(e,r){var{payload:t}=r;e.totalPages=t}}}),{setSearchValue:w,resetSearch:P,setTotalPages:S}=O.actions;const N=O.reducer;var k=(0,h.oM)({name:"user",initialState:{email:null,token:null,id:null},reducers:{setUser(e,r){e.email=r.payload.email,e.token=r.payload.token,e.id=r.payload.id},removeUser(e){e.email=null,e.token=null,e.id=null}}}),{setUser:A,removeUser:E}=k.actions;const _=k.reducer;var C=()=>e=>r=>{if((0,h.h_)(r)){var t=r.payload;return"FETCH_ERROR"===t.status?o.Am.error("Ошибка подключения к серверу"):400===t.status&&t.data?o.Am.error(t.data.message):o.Am.error(t.error)}return e(r)},D=e=>e.auth.uid,T=e=>e.auth.email,I=e=>e.auth.statusAuth,U=(0,d.UY)({user:_,search:N,cards:x,auth:m}),L=(0,h.xC)({reducer:U,middleware:e=>e().concat(C)});function R(){var e=u(T);return{isAuth:!!e,email:e}}function M(e,r,t,n,a,s,o){try{var i=e[s](o),c=i.value}catch(e){return void t(e)}i.done?r(c):Promise.resolve(c).then(n,a)}function B(e){return function(){var r=this,t=arguments;return new Promise((function(n,a){var s=e.apply(r,t);function o(e){M(s,n,a,o,i,"next",e)}function i(e){M(s,n,a,o,i,"throw",e)}o(void 0)}))}}var F={baseURL:"https://api.unsplash.com",headers:{Authorization:"Client-ID ".concat("3Pox_wNs8532dngHm4uot-g_A-WiHVbZgQkXouZiKdY")}},H=function(){var e=B((function*(e){return e.ok?e.json():e.json().then((e=>Promise.reject(null==e?void 0:e.errors[0])))}));return function(r){return e.apply(this,arguments)}}(),q=function(){var e=B((function*(e){var{endPoint:r,body:t,method:n}=e;try{var{baseURL:a,headers:s}=F,o={headers:s,method:n||"GET"};t&&(o.body=JSON.stringify(t));var i=yield fetch("".concat(a).concat(r),o);return H(i)}catch(e){return Promise.reject("Unexpected error from makeRequest")}}));return function(r){return e.apply(this,arguments)}}(),W=e=>{var r=[];for(var t in e)e[t]&&r.push("".concat(t,"=").concat(e[t]));return"?"+r.join("&")},X=e=>q({endPoint:"/photos/".concat(e)}),J=e=>{var r="";return e&&(r=W(e)),q({endPoint:"/photos".concat(r)})},Y=e=>{var r="";return e&&(r=W(e)),q({endPoint:"/photos/random".concat(r)})},z=e=>{var r=W(e);return q({endPoint:"/search/photos".concat(r)})};function G(e,r,t,n,a,s,o){try{var i=e[s](o),c=i.value}catch(e){return void t(e)}i.done?r(c):Promise.resolve(c).then(n,a)}function K(e){return function(){var r=this,t=arguments;return new Promise((function(n,a){var s=e.apply(r,t);function o(e){G(s,n,a,o,i,"next",e)}function i(e){G(s,n,a,o,i,"throw",e)}o(void 0)}))}}var V=t(893),Q=["component"];function Z(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function $(e,r,t){return(r=function(e){var r=function(e,r){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,r||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"==typeof r?r:String(r)}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function ee(e,r){if(null==e)return{};var t,n,a=function(e,r){if(null==e)return{};var t,n,a={},s=Object.keys(e);for(n=0;n<s.length;n++)t=s[n],r.indexOf(t)>=0||(a[t]=e[t]);return a}(e,r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)t=s[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var re=e=>{var{component:r}=e,t=ee(e,Q),{isAuth:n}=R();return n?(0,V.jsx)(r,function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?Z(Object(t),!0).forEach((function(r){$(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Z(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({},t)):(0,V.jsx)(c.Fg,{to:"/login",replace:!0})},te=t(953);const ne=t.p+"assets/fav-filled-2d60195711216266f4a8.png",ae=t.p+"assets/fav-94d68ded12286cc7a798.png";var se=t(977),oe=t(353),ie=(0,se.ZF)({apiKey:"AIzaSyDUXWXlVm8uHklKlTz7-sWxTXbFYuMOT5U",authDomain:"aston-photo-gallery.firebaseapp.com",projectId:"aston-photo-gallery",storageBucket:"aston-photo-gallery.appspot.com",messagingSenderId:"547446131876",appId:"1:547446131876:web:a136a2475d8f92bacaaa31"}),ce=(0,oe.v0)(ie),le=(0,te.ad)(ie);const ue="t3s26QVSgcFUkHVBkvzg",de="amvc2ZeBeTyXgURj4TYG",he="NWzt4LNtXuUqmCr7wwTQ",ve="sweITg5Z2tt3krWwZgK1",fe="ZbKAyAgU6jerGgPQ5g9A",pe="uOcb9zrYLDNLhc_hYWS2";function me(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function je(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?me(Object(t),!0).forEach((function(r){ye(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):me(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function ye(e,r,t){return(r=function(e){var r=function(e,r){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,r||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"==typeof r?r:String(r)}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function ge(e,r,t,n,a,s,o){try{var i=e[s](o),c=i.value}catch(e){return void t(e)}i.done?r(c):Promise.resolve(c).then(n,a)}function be(e){return function(){var r=this,t=arguments;return new Promise((function(n,a){var s=e.apply(r,t);function o(e){ge(s,n,a,o,i,"next",e)}function i(e){ge(s,n,a,o,i,"throw",e)}o(void 0)}))}}var xe=e=>{var{isAuth:r}=R(),{id:t,urls:n,alt_description:a,liked_by_user:c}=e,[l,d]=(0,i.useState)(c),h=u(D),v=e=>{e.preventDefault(),d((()=>!l))},f=function(){var r=be((function*(){try{yield(0,te.pl)((0,te.JU)(le,"users/".concat(h,"/favorites"),t),je(je({},e),{},{liked_by_user:!0}))}catch(e){o.Am.error("Error adding a card to favorites ",e)}}));return function(){return r.apply(this,arguments)}}(),p=function(){var e=be((function*(e){yield(0,te.oe)((0,te.JU)(le,"users/".concat(h,"/favorites"),e))}));return function(r){return e.apply(this,arguments)}}();return(0,V.jsx)("div",{className:ue,children:(0,V.jsxs)(s.rU,{to:"/card?id=".concat(t),children:[(0,V.jsx)("div",{className:de,children:(0,V.jsx)("button",{disabled:!r,title:r?"Add to favorites":"Authorize to add to favorites",className:he,onClick:l?e=>{v(e),p(t)}:e=>{v(e),f()},children:(0,V.jsx)("img",{src:l?ne:ae,alt:""})})}),(0,V.jsx)("div",{className:ve,children:(0,V.jsx)("img",{src:null==n?void 0:n.regular,alt:"image"})}),(0,V.jsx)("div",{className:fe,children:(0,V.jsx)("div",{className:pe,children:a&&a.length>100?"".concat(a.slice(0,100),"..."):a})})]})})};const Oe="bcvEoAGvxOleIuasmcg6";var we=e=>{var{cards:r}=e,t=r.map((e=>{var{id:r,urls:t,alt_description:n,liked_by_user:a}=e;return(0,V.jsx)("li",{children:(0,V.jsx)(xe,{id:r,urls:t,alt_description:n,liked_by_user:a})},r)}));return(0,V.jsx)("ul",{className:Oe,children:t})},Pe=()=>(0,V.jsx)("svg",{viewBox:"0 0 32 32",width:"32",height:"32",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:(0,V.jsx)("path",{d:"M23.66 6.96 16 14.63 8.32 6.96 6.95 8.33 14.62 16l-7.67 7.67 1.37 1.37 7.67-7.68 7.67 7.68 1.37-1.37L17.36 16l7.67-7.67-1.37-1.37Z",fill:"inherit"})});const Se="yxxp4Dpp6UIdHwxABVeG";var Ne=e=>{var{title:r,handleSubmit:t}=e,[n,a]=(0,i.useState)(""),[s,o]=(0,i.useState)(""),[c,l]=(0,i.useState)(""),[u,d]=(0,i.useState)("");return(0,V.jsxs)("form",{className:Se,onSubmit:e=>{e.preventDefault(),t(n,s)},children:[(0,V.jsxs)("div",{children:[(0,V.jsx)("label",{htmlFor:"email",children:"Email:"}),(0,V.jsx)("input",{type:"email",value:n,onChange:e=>{var r=e.target.value;a(r),(e=>{e?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)?l(""):l("Invalid email format"):l("Email is required")})(r)},placeholder:"Email",required:!0})]}),c&&(0,V.jsx)("p",{children:c}),(0,V.jsxs)("div",{children:[(0,V.jsx)("label",{htmlFor:"password",children:"Password:"}),(0,V.jsx)("input",{type:"password",value:s,onChange:e=>{var r=e.target.value;o(r),(e=>{e?e.length<6?d("Password must be at least 6 characters long"):d(""):d("Password is required")})(r)},placeholder:"Password",required:!0})]}),u&&(0,V.jsx)("p",{children:u}),(0,V.jsx)("button",{children:r})]})};const ke="dDRRXIIg4vAbQn8dQzmo",Ae="S6rLE3BqBsddY5TPfdhg",Ee="g87VLBs39AwMWAOzcAff";var _e=()=>(0,V.jsxs)(s.rU,{to:"/",className:ke,children:[(0,V.jsx)("h1",{className:Ae,children:"Photo Gallery"}),(0,V.jsx)("p",{className:Ee,children:"find your mood"})]});const Ce="lr2y5T6qgvpckfJ9StH9",De="Dq0AwFGRf_CJ_F_WOfLZ",Te="M3tvYWDWIXB5YMkbPf7o";var Ie=e=>{var{fullscreen:r}=e;return(0,V.jsx)("div",{className:"".concat(Ce," ").concat(r&&De),children:(0,V.jsx)("span",{className:Te})})};const Ue="fIx_CB_Dp1B5CT0nSuBm",Le="U1DnwO2qYxKLL1LqlTFX",Re="bqMkJLwVtyT9pESoUdMK";function Me(e,r,t,n,a,s,o){try{var i=e[s](o),c=i.value}catch(e){return void t(e)}i.done?r(c):Promise.resolve(c).then(n,a)}var Be=()=>{var e=l(),r=(0,c.s0)(),{isAuth:t,email:n}=R(),a=function(){var t,n=(t=function*(){try{yield(0,oe.w7)(ce),e(E()),r("/")}catch(e){o.Am.error("Error logging out ",e)}},function(){var e=this,r=arguments;return new Promise((function(n,a){var s=t.apply(e,r);function o(e){Me(s,n,a,o,i,"next",e)}function i(e){Me(s,n,a,o,i,"throw",e)}o(void 0)}))});return function(){return n.apply(this,arguments)}}();if("SUCCESS"!==u(I))return(0,V.jsx)(Ie,{fullscreen:!0});var i=e=>{var{isActive:r}=e;return r?Le:""};return(0,V.jsx)("nav",{className:Ue,children:t?(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(s.OL,{to:"/favorites",className:i,children:"Favorites"}),(0,V.jsx)(s.OL,{to:"/history",className:i,children:"History"}),(0,V.jsxs)("button",{onClick:()=>a(),className:Re,children:["Log out from ",(0,V.jsx)("span",{children:n})]})]}):(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(s.OL,{to:"/login",className:i,children:"Login"}),(0,V.jsx)(s.OL,{to:"/register",className:i,children:"Register"})]})})},Fe=()=>(0,V.jsx)("svg",{focusable:"false",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,V.jsx)("path",{d:"M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"})});const He="k5rxhHqufc0wTH_iRBgY",qe="S898CJNNo9cb_xQn4FBI";var We=()=>(0,V.jsx)("header",{className:He,children:(0,V.jsxs)("div",{className:qe,children:[(0,V.jsx)(_e,{}),(0,V.jsx)(Be,{})]})});const Xe="QcyAwWrXP4IvTyugCBDk",Je="zwrmBObIHf75VWaw38yw";var Ye=e=>{var{children:r}=e;return(0,V.jsxs)("div",{className:Xe,children:[(0,V.jsx)(We,{}),(0,V.jsx)("main",{className:Je,children:r})]})};const ze="kIwoKeY1ahkooJTXbu5k",Ge="kioBQlhTvvd5Aum2TU03",Ke="XsniiaeK_STDgsIj1Oog",Ve="ajFuQufx5wCXf2dNC1RP";var Qe=e=>{var{onSubmit:r}=e,t=l(),[n,a]=(0,i.useState)(""),s=(0,i.useRef)(null),o=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=(0,i.useRef)();function a(){n.current&&(clearTimeout(n.current),n.current=void 0)}return(0,i.useEffect)((()=>t?a:void 0),[t]),function(){for(var t=arguments.length,s=new Array(t),o=0;o<t;o++)s[o]=arguments[o];a(),n.current=setTimeout((()=>e(...s)),r)}}((e=>t(w(e))),500,!0);return(0,i.useEffect)((()=>()=>{t(P())}),[t]),(0,V.jsxs)("form",{className:ze,onSubmit:function(e){e.preventDefault(),r(n)},name:"search",children:[(0,V.jsx)("input",{className:Ge,ref:s,value:n,placeholder:"Find a photo for you",onChange:function(e){a(e.target.value),o(e.target.value)}}),n&&(0,V.jsx)("button",{className:Ke,type:"button","aria-label":"clear input",onClick:function(){var e;a(""),t(P()),null===(e=s.current)||void 0===e||e.focus()},children:(0,V.jsx)(Pe,{})}),(0,V.jsx)("button",{type:"submit",className:Ve,disabled:!n.length,"aria-label":"Search",children:(0,V.jsx)(Fe,{})})]})};const Ze="nlWODRnelZwk8H1WSwb3",$e="tRTLbVEQAzT1QRMCc1PM",er="CdPc0hE8Dg8KmcnLx3cE",rr="kmzUaLH__6hRQyiA0kIw",tr="Ys99cJte9zU9W_qELMT5",nr="XAST3IQBuGPp_yosKtEo",ar="maDGhwQedZYPPrckXRM1";var sr=e=>{var{id:r,alt_description:t="no description",thumb:n,owner:a,likes:o=0}=e;return(0,V.jsxs)("article",{className:Ze,children:[(0,V.jsx)(s.rU,{to:"/card?id=".concat(r),className:$e}),(0,V.jsx)("div",{className:er,children:(0,V.jsx)("img",{src:n,alt:t})}),(0,V.jsx)("h2",{className:nr,children:t}),(0,V.jsx)("p",{className:tr,children:"by ".concat(a)}),(0,V.jsxs)("p",{className:rr,children:[(0,V.jsx)("span",{role:"img","aria-label":"heart",children:"❤️"})," ",o]}),(0,V.jsx)("span",{className:ar,children:"→"})]})};const or="TD1HD6cN_5HU7pXRZlxa",ir="PQyGLGo76sk88jGeFpf5",cr="cIBHfP8MjIO0mJykMJa2",lr="E8ykriKZvDPoO7oOFtns";var ur=e=>{var{photos:r,visible:t,errorMessage:n=""}=e,a=r.map((e=>{var{id:r,alt_description:t,urls:n,user:a,likes:s}=e;return(0,V.jsx)("li",{children:(0,V.jsx)(sr,{id:r,alt_description:t,thumb:n.thumb,owner:a.name,likes:s})},r)}));return(0,V.jsx)("div",{className:"".concat(or," ").concat(t&&cr),id:"bar","aria-label":"Suggestions Bar",children:n?(0,V.jsx)("p",{className:lr,children:n}):(0,V.jsx)("ul",{className:ir,children:a})})};const dr="lkajQKCidxJ9BGKaIToL";function hr(e,r,t,n,a,s,o){try{var i=e[s](o),c=i.value}catch(e){return void t(e)}i.done?r(c):Promise.resolve(c).then(n,a)}var vr=()=>{var e=l(),r=u(D),[t,n]=(0,i.useState)(!1),[a,s]=(0,i.useState)([]),[c,d]=(0,i.useState)(""),{isAuth:h}=R(),{searchValue:v,countPerPage:f}=u((e=>e.search)),p=function(){var t,a=(t=function*(t){if(n(!1),z({query:t,per_page:f,page:1}).then((r=>{var{results:t,total_pages:n}=r;e(y(t)),e(S(n))})).catch((e=>{o.Am.error("Request error ",e)})),h)try{yield(0,te.pl)((0,te.JU)(le,"users/".concat(r,"/searchHistory"),t),{searchValue:t})}catch(e){o.Am.error("Error adding a search parameter ",e)}},function(){var e=this,r=arguments;return new Promise((function(n,a){var s=t.apply(e,r);function o(e){hr(s,n,a,o,i,"next",e)}function i(e){hr(s,n,a,o,i,"throw",e)}o(void 0)}))});return function(e){return a.apply(this,arguments)}}(),m=e=>{d("string"==typeof e?e:"An error occurred during the request. Please try again later."),s([])};return(0,i.useEffect)((()=>{d(""),v&&Y({count:5,query:v}).then((e=>{s(e)})).catch(m).finally((()=>n(!0)))}),[v]),(0,i.useEffect)((()=>{var e=e=>{t&&!e.target.closest("section")&&n(!1)};return t&&document.addEventListener("click",e),()=>{document.removeEventListener("click",e)}}),[t]),(0,V.jsxs)("section",{className:dr,children:[(0,V.jsx)(Qe,{onSubmit:p}),(0,V.jsx)(ur,{photos:a,visible:t&&v.length>0,errorMessage:c})]})};const fr={cardPage:"KJtAPu_Cnoijkj2S0QAw",cardInfo:"EklOGZMCgGTOhK40Q9k1",cardImage:"pSlmUVy_0sa_pz0wteQ8",cardDescription:"BGgAqLKXk42y7c0JtmYV",title:"SNoz5zU2p4uwGAeFtlH9",extraInfo:"NY1lFrOd_RJg2i6XJyF9",author:"sdxTcX9qj5tOfomBr9vr",location:"gw3XbhzPk7uJmk3A_wAh",othersPosts:"HqW1R4WykOyRHOIjfeYS",posts:"vppp4ePSNtO_JmfkMC7e"};function pr(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function mr(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?pr(Object(t),!0).forEach((function(r){jr(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):pr(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function jr(e,r,t){return(r=function(e){var r=function(e,r){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,r||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"==typeof r?r:String(r)}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function yr(e,r,t,n,a,s,o){try{var i=e[s](o),c=i.value}catch(e){return void t(e)}i.done?r(c):Promise.resolve(c).then(n,a)}function gr(){var e,r,t,n,a=(0,c.TH)(),s=u(D),[l,d]=(0,i.useState)(null),[h,v]=(0,i.useState)(null),{isAuth:f}=R(),p=(0,i.useCallback)(function(){var e,r=(e=function*(e){var r,t=yield X(e);if(d(t),f)try{yield(0,te.pl)((0,te.JU)(le,"users/".concat(s,"/cardsHistory"),e),mr({},t))}catch(e){o.Am.error("Error when adding a card to the history ",e)}var n=null==t||null===(r=t.topics[0])||void 0===r?void 0:r.id,a=yield Y({topics:n,orientation:"portrait",count:20});v(a)},function(){var r=this,t=arguments;return new Promise((function(n,a){var s=e.apply(r,t);function o(e){yr(s,n,a,o,i,"next",e)}function i(e){yr(s,n,a,o,i,"throw",e)}o(void 0)}))});return function(e){return r.apply(this,arguments)}}(),[f,s]);return(0,i.useLayoutEffect)((()=>{var e=new URLSearchParams(window.location.search).get("id");p(e)}),[a,p]),(0,V.jsxs)("div",{className:fr.cardPage,children:[l&&(0,V.jsxs)("section",{className:fr.cardInfo,children:[(0,V.jsx)("div",{className:fr.cardImage,children:(0,V.jsx)("img",{src:null==l||null===(e=l.urls)||void 0===e?void 0:e.regular,alt:""})}),(0,V.jsxs)("div",{className:fr.cardDescription,children:[(0,V.jsx)("div",{className:fr.title,children:(0,V.jsx)("h2",{children:null==l?void 0:l.description})}),(0,V.jsxs)("div",{className:fr.extraInfo,children:[(0,V.jsx)("div",{className:fr.author,children:null==l||null===(r=l.user)||void 0===r?void 0:r.name}),(0,V.jsx)("div",{className:fr.location,children:null!=l&&null!==(t=l.location)&&void 0!==t&&t.country?(0,V.jsxs)(V.Fragment,{children:[null==l||null===(n=l.location)||void 0===n?void 0:n.country,l.location.city?", ".concat(l.location.city):""]}):"Unknown location"})]})]})]}),(0,V.jsxs)("section",{className:fr.othersPosts,children:[(0,V.jsx)("h2",{children:"You might like it"}),(0,V.jsx)("ul",{className:fr.posts,children:h&&h.map((e=>(0,V.jsx)("li",{children:(0,V.jsx)(xe,mr({},e),e.id)},e.id)))})]})]})}var br=()=>{var e=l(),r=(0,c.s0)();return(0,V.jsx)(Ne,{title:"Sign In",handleSubmit:(t,n)=>{(0,oe.e5)(ce,t,n).then((t=>{var{user:n}=t;e(A({email:n.email,id:n.uid,token:n.refreshToken})),r("/")})).catch((e=>o.Am.error("Incorrect email or password",e)))}})},xr=()=>{var{isAuth:e}=R(),r=(0,c.s0)();return e&&r("/"),(0,V.jsxs)("div",{className:"authContainer",children:[(0,V.jsx)("h1",{children:"Login"}),(0,V.jsx)(br,{}),(0,V.jsxs)("p",{children:["Don't have an account? ",(0,V.jsx)(s.rU,{to:"/register",children:"Register here"})]})]})},Or=()=>{var e=l(),r=(0,c.s0)();return(0,V.jsx)(Ne,{title:"Sign Out",handleSubmit:(t,n)=>{(0,oe.Xb)(ce,t,n).then((t=>{var{user:n}=t;e(A({email:n.email,id:n.uid,token:n.refreshToken})),r("/")})).catch((e=>o.Am.error("Incorrect email or password ",e)))}})},wr=()=>{var{isAuth:e}=R(),r=(0,c.s0)();return e&&r("/"),(0,V.jsxs)("div",{className:"authContainer",children:[(0,V.jsx)("h1",{children:"Register"}),(0,V.jsx)(Or,{}),(0,V.jsxs)("p",{children:["Already have an account? ",(0,V.jsx)(s.rU,{to:"/login",children:"Sign in"})]})]})},Pr=()=>{var[e,r]=(0,i.useState)([]),t=u(D),[n,a]=(0,i.useState)(!1);return(0,i.useEffect)((()=>{a(!0);var e=(0,te.cf)((0,te.hJ)(le,"users/".concat(t,"/favorites")),(e=>{var t=e.docs.map((e=>e.data()));r(t),a(!1)}));return()=>e()}),[t]),(0,V.jsxs)(V.Fragment,{children:[n&&(0,V.jsx)(Ie,{}),!n&&e.length>0&&(0,V.jsx)(we,{cards:e}),!n&&0===e.length&&(0,V.jsx)("h2",{children:"You have no favorites"})]})};const Sr="GRbRIY8KlgqcpHaT1A6O";var Nr=()=>{var e=l(),{cardsData:r}=u((e=>e.cards)),{countPerPage:t}=u((e=>e.search)),[n,a]=(0,i.useState)(!1);return function(){var e=l(),[r,t]=(0,i.useState)(2),[n,a]=(0,i.useState)(!1),{searchValue:s,countPerPage:o,totalPages:c}=u((e=>e.search)),d=(0,i.useCallback)(K((function*(){var n;if(s){var{results:i}=yield z({query:s,page:r,per_page:o});n=i}else n=yield J({page:r,per_page:o});e(g(n)),t((e=>e+1)),a(!1)})),[e,r,s,o]);(0,i.useEffect)((()=>{if(n){if(c&&c<r)return void a(!1);d()}}),[n,d,r,c]),(0,i.useEffect)((()=>(document.addEventListener("scroll",h),function(){document.removeEventListener("scroll",h)})),[]);var h=e=>{e.target.documentElement.scrollHeight-(e.target.documentElement.scrollTop+window.innerHeight)<100&&a(!0)}}(),(0,i.useEffect)((()=>{r.length||(a(!0),J({page:1,per_page:t}).then((r=>{e(y(r))})).catch((e=>{o.Am.error("Request error ",e)})).finally((()=>{a(!1)})))}),[r.length,e,t]),(0,V.jsxs)("div",{className:Sr,children:[(0,V.jsx)(vr,{}),n&&(0,V.jsx)(Ie,{}),!n&&r.length>0&&(0,V.jsx)(we,{cards:r})]})};const kr="zL5jDhxyHZEFGIR399CC",Ar="X1uMAynGbM_EvqQCAGKY",Er="RtBbPB1p3DrsPIhNNbBX",_r="XlkSyiFtif7y4fJ2_5Ct",Cr="WYKHJaYO1N1tQRP4PnDm";function Dr(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function Tr(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?Dr(Object(t),!0).forEach((function(r){Ir(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Dr(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function Ir(e,r,t){return(r=function(e){var r=function(e,r){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,r||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"==typeof r?r:String(r)}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function Ur(e,r,t,n,a,s,o){try{var i=e[s](o),c=i.value}catch(e){return void t(e)}i.done?r(c):Promise.resolve(c).then(n,a)}const Lr=function(){var e=l(),r=(0,c.s0)(),[t,n]=(0,i.useState)([]),[a,s]=(0,i.useState)([]),d=u(D),[h,v]=(0,i.useState)(!1);(0,i.useEffect)((()=>{v(!0);var e=(0,te.cf)((0,te.hJ)(le,"users/".concat(d,"/cardsHistory")),(e=>{var r=e.docs.map((e=>e.data()));n(r.reverse()),v(!1)})),r=(0,te.cf)((0,te.hJ)(le,"users/".concat(d,"/searchHistory")),(e=>{var r=e.docs.map((e=>e.data()));s(r.reverse()),v(!1)}));return()=>{e(),r()}}),[d]);var f=function(){var t,n=(t=function*(t){z({query:t,per_page:20}).then((r=>{e(y(r.results))})).catch((e=>{o.Am.error("Request error ",e)})).finally((()=>r("/")))},function(){var e=this,r=arguments;return new Promise((function(n,a){var s=t.apply(e,r);function o(e){Ur(s,n,a,o,i,"next",e)}function i(e){Ur(s,n,a,o,i,"throw",e)}o(void 0)}))});return function(e){return n.apply(this,arguments)}}();return h?(0,V.jsx)(Ie,{}):(0,V.jsxs)("div",{className:kr,children:[(0,V.jsx)("h2",{children:"Cards you've looked at"}),null!=t&&t.length?(0,V.jsx)("ul",{className:Ar,children:t.map(((e,r)=>(0,V.jsx)("li",{children:(0,V.jsx)(xe,Tr({},e))},r)))}):(0,V.jsx)("p",{className:Cr,children:"You haven't looked at any cards yet"}),(0,V.jsx)("h2",{children:"Search history"}),null!=a&&a.length?(0,V.jsx)("ul",{className:Er,children:a.map(((e,r)=>(0,V.jsx)("li",{className:_r,onClick:()=>f(e.searchValue),children:e.searchValue},r)))}):(0,V.jsx)("p",{className:Cr,children:"You haven't searched for anything yet"})]})},Rr="vrNuVB8A4modZMRW46_n",Mr="MDaoXD0zx4g0qVFozIpL",Br="b_1Zox2nlTI8sv7BKEX4",Fr="KT2lhf6TUn2ZuPUOuFME",Hr="d44UssZEHzOGhqUKsckQ";var qr=()=>{var e=(0,c.s0)();return(0,V.jsxs)("section",{className:Rr,children:[(0,V.jsx)("p",{className:Mr,children:"404"}),(0,V.jsx)("h2",{className:Br,children:"Page not found"}),(0,V.jsx)("nav",{children:(0,V.jsxs)("ul",{className:Fr,children:[(0,V.jsx)("li",{children:(0,V.jsx)("button",{onClick:()=>e(-1),className:Hr,type:"button",children:"Back"})}),(0,V.jsx)("li",{children:(0,V.jsx)("button",{onClick:()=>e("/",{replace:!0}),className:Hr,type:"button",children:"Main page"})})]})})]})},Wr=(0,h.hg)("auth/checkAuth",((e,r)=>{var{dispatch:t}=r;(0,oe.Aj)(ce,(e=>t(e?f({email:e.email,uid:e.uid}):p())))}));const Xr=function(){var e=l(),r=u(I);return(0,i.useEffect)((()=>{e(Wr())}),[e]),"LOADING"===r?(0,V.jsx)(Ie,{fullscreen:!0}):(0,V.jsx)(Ye,{children:(0,V.jsxs)(c.Z5,{children:[(0,V.jsx)(c.AW,{path:"/",element:(0,V.jsx)(Nr,{})}),(0,V.jsx)(c.AW,{path:"/login",element:(0,V.jsx)(xr,{})}),(0,V.jsx)(c.AW,{path:"/register",element:(0,V.jsx)(wr,{})}),(0,V.jsx)(c.AW,{path:"/card",element:(0,V.jsx)(gr,{})}),(0,V.jsx)(c.AW,{path:"/favorites",element:(0,V.jsx)(re,{component:Pr})}),(0,V.jsx)(c.AW,{path:"/history",element:(0,V.jsx)(re,{component:Lr})}),(0,V.jsx)(c.AW,{path:"*",element:(0,V.jsx)(qr,{})})]})})};(0,n.s)(document.getElementById("root")).render((0,V.jsx)(a.zt,{store:L,children:(0,V.jsxs)(s.VK,{basename:"aston-team-project",children:[(0,V.jsx)(o.Ix,{theme:"dark",autoClose:2e3}),(0,V.jsx)(Xr,{})]})}))}},a={};function s(e){var r=a[e];if(void 0!==r)return r.exports;var t=a[e]={exports:{}};return n[e](t,t.exports,s),t.exports}s.m=n,e=[],s.O=(r,t,n,a)=>{if(!t){var o=1/0;for(u=0;u<e.length;u++){for(var[t,n,a]=e[u],i=!0,c=0;c<t.length;c++)(!1&a||o>=a)&&Object.keys(s.O).every((e=>s.O[e](t[c])))?t.splice(c--,1):(i=!1,a<o&&(o=a));if(i){e.splice(u--,1);var l=n();void 0!==l&&(r=l)}}return r}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[t,n,a]},t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,s.t=function(e,n){if(1&n&&(e=this(e)),8&n)return e;if("object"==typeof e&&e){if(4&n&&e.__esModule)return e;if(16&n&&"function"==typeof e.then)return e}var a=Object.create(null);s.r(a);var o={};r=r||[null,t({}),t([]),t(t)];for(var i=2&n&&e;"object"==typeof i&&!~r.indexOf(i);i=t(i))Object.getOwnPropertyNames(i).forEach((r=>o[r]=()=>e[r]));return o.default=()=>e,s.d(a,o),a},s.d=(e,r)=>{for(var t in r)s.o(r,t)&&!s.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:r[t]})},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;s.g.importScripts&&(e=s.g.location+"");var r=s.g.document;if(!e&&r&&(r.currentScript&&(e=r.currentScript.src),!e)){var t=r.getElementsByTagName("script");if(t.length)for(var n=t.length-1;n>-1&&!e;)e=t[n--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),s.p=e+"../"})(),(()=>{var e={143:0};s.O.j=r=>0===e[r];var r=(r,t)=>{var n,a,[o,i,c]=t,l=0;if(o.some((r=>0!==e[r]))){for(n in i)s.o(i,n)&&(s.m[n]=i[n]);if(c)var u=c(s)}for(r&&r(t);l<o.length;l++)a=o[l],s.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return s.O(u)},t=self.webpackChunkgallery=self.webpackChunkgallery||[];t.forEach(r.bind(null,0)),t.push=r.bind(null,t.push.bind(t))})();var o=s.O(void 0,[474],(()=>s(940)));o=s.O(o)})();
//# sourceMappingURL=042d5257bda54d1ec6ad.js.map