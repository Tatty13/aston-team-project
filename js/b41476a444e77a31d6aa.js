(()=>{"use strict";var e,r,t,n={82:(e,r,t)=>{var n=t(745),a=t(998),s=t(655),i=t(42),o=(t(55),t(294)),c=t(335),l=()=>(0,a.I0)(),u=a.v9,d=t(791),h=t(168),v=(0,h.oM)({name:"auth",initialState:{statusAuth:"LOADING",email:null,uid:""},reducers:{setAuthUser(e,r){e.email=r.payload.email,e.uid=r.payload.uid,e.statusAuth="SUCCESS"},userNotFound(e){e.email=null,e.uid="",e.statusAuth="SUCCESS"}}}),{setAuthUser:f,userNotFound:p}=v.actions;const m=v.reducer;var j=(0,h.oM)({name:"cards",initialState:{cardsData:[],saveCardsData:[]},reducers:{replaceCards(e,r){e.cardsData=r.payload},addMoreCards(e,r){e.cardsData.push(...r.payload)},removeCards(e){e.cardsData=[]}}}),{replaceCards:y,addMoreCards:g,removeCards:b}=j.actions;const x=j.reducer;var O=(0,h.oM)({name:"search",initialState:{searchValue:"",countPerPage:30,totalPages:0},reducers:{setSearchValue(e,r){e.searchValue=r.payload},resetSearch(e){e.searchValue=""},setTotalPages(e,r){var{payload:t}=r;e.totalPages=t}}}),{setSearchValue:P,resetSearch:w,setTotalPages:S}=O.actions;const N=O.reducer;var A=(0,h.oM)({name:"user",initialState:{email:null,token:null,id:null},reducers:{setUser(e,r){e.email=r.payload.email,e.token=r.payload.token,e.id=r.payload.id},removeUser(e){e.email=null,e.token=null,e.id=null}}}),{setUser:E,removeUser:_}=A.actions;const k=A.reducer;var I=()=>e=>r=>{if((0,h.h_)(r)){var t=r.payload;return"FETCH_ERROR"===t.status?i.Am.error("Ошибка подключения к серверу"):400===t.status&&t.data?i.Am.error(t.data.message):i.Am.error(t.error)}return e(r)},C=e=>e.auth.uid,D=e=>e.auth.email,R=e=>e.auth.statusAuth,T=(0,d.UY)({user:k,search:N,cards:x,auth:m}),U=(0,h.xC)({reducer:T,middleware:e=>e().concat(I)});function L(){var e=u(D);return{isAuth:!!e,email:e}}function B(e,r,t,n,a,s,i){try{var o=e[s](i),c=o.value}catch(e){return void t(e)}o.done?r(c):Promise.resolve(c).then(n,a)}function M(e){return function(){var r=this,t=arguments;return new Promise((function(n,a){var s=e.apply(r,t);function i(e){B(s,n,a,i,o,"next",e)}function o(e){B(s,n,a,i,o,"throw",e)}i(void 0)}))}}var F={baseURL:"https://api.unsplash.com",headers:{Authorization:"Client-ID ".concat("iRxshX7iJu-wBOq-ZAfABikP23HpyIZ2CDpbck9JcLw")}},V=function(){var e=M((function*(e){return e.ok?e.json():e.json().then((e=>Promise.reject(null==e?void 0:e.errors[0])))}));return function(r){return e.apply(this,arguments)}}(),G=function(){var e=M((function*(e){var{endPoint:r,body:t,method:n}=e;try{var{baseURL:a,headers:s}=F,i={headers:s,method:n||"GET"};t&&(i.body=JSON.stringify(t));var o=yield fetch("".concat(a).concat(r),i);return V(o)}catch(e){return Promise.reject("Unexpected error from makeRequest")}}));return function(r){return e.apply(this,arguments)}}(),H=e=>{var r=[];for(var t in e)e[t]&&r.push("".concat(t,"=").concat(e[t]));return"?"+r.join("&")},q=e=>G({endPoint:"/photos/".concat(e)}),J=e=>{var r="";return e&&(r=H(e)),G({endPoint:"/photos".concat(r)})},K=e=>{var r="";return e&&(r=H(e)),G({endPoint:"/photos/random".concat(r)})},Y=e=>{var r=H(e);return G({endPoint:"/search/photos".concat(r)})};function W(e,r,t,n,a,s,i){try{var o=e[s](i),c=o.value}catch(e){return void t(e)}o.done?r(c):Promise.resolve(c).then(n,a)}function Q(e){return function(){var r=this,t=arguments;return new Promise((function(n,a){var s=e.apply(r,t);function i(e){W(s,n,a,i,o,"next",e)}function o(e){W(s,n,a,i,o,"throw",e)}i(void 0)}))}}var X=t(893),z=["component"];function Z(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function $(e,r,t){return(r=function(e){var r=function(e,r){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,r||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"==typeof r?r:String(r)}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function ee(e,r){if(null==e)return{};var t,n,a=function(e,r){if(null==e)return{};var t,n,a={},s=Object.keys(e);for(n=0;n<s.length;n++)t=s[n],r.indexOf(t)>=0||(a[t]=e[t]);return a}(e,r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)t=s[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var re=e=>{var{component:r}=e,t=ee(e,z),{isAuth:n}=L();return n?(0,X.jsx)(r,function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?Z(Object(t),!0).forEach((function(r){$(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Z(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({},t)):(0,X.jsx)(c.Fg,{to:"/login",replace:!0})},te=t(953);const ne=t.p+"assets/fav-filled-2d60195711216266f4a8.png",ae=t.p+"assets/fav-94d68ded12286cc7a798.png";var se=t(977),ie=t(785),oe={apiKey:"MISSING_ENV_VAR".REACT_APP_FIREBASE_API_KEY,authDomain:"MISSING_ENV_VAR".REACT_APP_FIREBASE_AUTH_DOMAIN,projectId:"MISSING_ENV_VAR".REACT_APP_FIREBASE_PROJECT_ID,storageBucket:"MISSING_ENV_VAR".REACT_APP_FIREBASE_STORAGE_BUCKET,messagingSenderId:"MISSING_ENV_VAR".REACT_APP_FIREBASE_MESSAGING_SENDER_ID,appId:"MISSING_ENV_VAR".REACT_APP_FIREBASE_APP_ID},ce=(0,se.ZF)(oe),le=(0,ie.v0)(ce),ue=(0,te.ad)(ce);const de="t3s26QVSgcFUkHVBkvzg",he="amvc2ZeBeTyXgURj4TYG",ve="NWzt4LNtXuUqmCr7wwTQ",fe="sweITg5Z2tt3krWwZgK1",pe="ZbKAyAgU6jerGgPQ5g9A",me="uOcb9zrYLDNLhc_hYWS2";function je(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function ye(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?je(Object(t),!0).forEach((function(r){ge(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):je(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function ge(e,r,t){return(r=function(e){var r=function(e,r){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,r||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"==typeof r?r:String(r)}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function be(e,r,t,n,a,s,i){try{var o=e[s](i),c=o.value}catch(e){return void t(e)}o.done?r(c):Promise.resolve(c).then(n,a)}function xe(e){return function(){var r=this,t=arguments;return new Promise((function(n,a){var s=e.apply(r,t);function i(e){be(s,n,a,i,o,"next",e)}function o(e){be(s,n,a,i,o,"throw",e)}i(void 0)}))}}var Oe=e=>{var{isAuth:r}=L(),{id:t,urls:n,alt_description:a,liked_by_user:c}=e,[l,d]=(0,o.useState)(c),h=u(C),v=e=>{e.preventDefault(),d(!l)},f=function(){var r=xe((function*(){try{yield(0,te.pl)((0,te.JU)(ue,"users/".concat(h,"/favorites"),t),ye(ye({},e),{},{liked_by_user:!0}))}catch(e){i.Am.error("Error adding a card to favorites ",e)}}));return function(){return r.apply(this,arguments)}}(),p=function(){var e=xe((function*(e){yield(0,te.oe)((0,te.JU)(ue,"users/".concat(h,"/favorites"),e))}));return function(r){return e.apply(this,arguments)}}();return(0,X.jsx)("div",{className:de,children:(0,X.jsxs)(s.rU,{to:"/card?id=".concat(t),children:[(0,X.jsx)("div",{className:he,children:(0,X.jsx)("button",{disabled:!r,title:r?"Add to favorites":"Authorize to add to favorites",className:ve,onClick:l?e=>{v(e),p(t)}:e=>{v(e),f()},children:(0,X.jsx)("img",{src:l?ne:ae,alt:""})})}),(0,X.jsx)("div",{className:fe,children:(0,X.jsx)("img",{src:null==n?void 0:n.regular,alt:"image"})}),(0,X.jsx)("div",{className:pe,children:(0,X.jsx)("div",{className:me,children:a&&a.length>100?"".concat(a.slice(0,100),"..."):a})})]})})};const Pe="bcvEoAGvxOleIuasmcg6";var we=e=>{var{cards:r}=e,t=r.map((e=>{var{id:r,urls:t,alt_description:n,liked_by_user:a}=e;return(0,X.jsx)("li",{children:(0,X.jsx)(Oe,{id:r,urls:t,alt_description:n,liked_by_user:a})},r)}));return(0,X.jsx)("ul",{className:Pe,children:t})};const Se="yxxp4Dpp6UIdHwxABVeG";var Ne=e=>{var{title:r,handleSubmit:t}=e,[n,a]=(0,o.useState)(""),[s,i]=(0,o.useState)(""),[c,l]=(0,o.useState)(""),[u,d]=(0,o.useState)("");return(0,X.jsxs)("form",{className:Se,onSubmit:e=>{e.preventDefault(),t(n,s)},children:[(0,X.jsxs)("div",{children:[(0,X.jsx)("label",{htmlFor:"email",children:"Email:"}),(0,X.jsx)("input",{type:"email",value:n,onChange:e=>{var r=e.target.value;a(r),(e=>{e?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)?l(""):l("Invalid email format"):l("Email is required")})(r)},placeholder:"Email",required:!0})]}),c&&(0,X.jsx)("p",{children:c}),(0,X.jsxs)("div",{children:[(0,X.jsx)("label",{htmlFor:"password",children:"Password:"}),(0,X.jsx)("input",{type:"password",value:s,onChange:e=>{var r=e.target.value;i(r),(e=>{e?e.length<6?d("Password must be at least 6 characters long"):d(""):d("Password is required")})(r)},placeholder:"Password",required:!0})]}),u&&(0,X.jsx)("p",{children:u}),(0,X.jsx)("button",{children:r})]})};const Ae="dDRRXIIg4vAbQn8dQzmo",Ee="S6rLE3BqBsddY5TPfdhg",_e="g87VLBs39AwMWAOzcAff";var ke=()=>(0,X.jsxs)(s.rU,{to:"/",className:Ae,children:[(0,X.jsx)("h1",{className:Ee,children:"Photo Gallery"}),(0,X.jsx)("p",{className:_e,children:"find your mood"})]});const Ie="lr2y5T6qgvpckfJ9StH9",Ce="Dq0AwFGRf_CJ_F_WOfLZ",De="M3tvYWDWIXB5YMkbPf7o";var Re=e=>{var{fullscreen:r}=e;return(0,X.jsx)("div",{className:"".concat(Ie," ").concat(r&&Ce),children:(0,X.jsx)("span",{className:De})})};const Te="fIx_CB_Dp1B5CT0nSuBm",Ue="U1DnwO2qYxKLL1LqlTFX",Le="bqMkJLwVtyT9pESoUdMK";function Be(e,r,t,n,a,s,i){try{var o=e[s](i),c=o.value}catch(e){return void t(e)}o.done?r(c):Promise.resolve(c).then(n,a)}var Me=()=>{var e=l(),r=(0,c.s0)(),{isAuth:t,email:n}=L(),a=function(){var t,n=(t=function*(){try{yield(0,ie.w7)(le),e(_()),r("/")}catch(e){i.Am.error("Error logging out ",e)}},function(){var e=this,r=arguments;return new Promise((function(n,a){var s=t.apply(e,r);function i(e){Be(s,n,a,i,o,"next",e)}function o(e){Be(s,n,a,i,o,"throw",e)}i(void 0)}))});return function(){return n.apply(this,arguments)}}();if("SUCCESS"!==u(R))return(0,X.jsx)(Re,{fullscreen:!0});var o=e=>{var{isActive:r}=e;return r?Ue:""};return(0,X.jsx)("nav",{className:Te,children:t?(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(s.OL,{to:"/favorites",className:o,children:"Favorites"}),(0,X.jsx)(s.OL,{to:"/history",className:o,children:"History"}),(0,X.jsxs)("button",{onClick:()=>a(),className:Le,children:["Log out from ",(0,X.jsx)("span",{children:n})]})]}):(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(s.OL,{to:"/login",className:o,children:"Login"}),(0,X.jsx)(s.OL,{to:"/register",className:o,children:"Register"})]})})};const Fe="k5rxhHqufc0wTH_iRBgY",Ve="S898CJNNo9cb_xQn4FBI";var Ge=()=>(0,X.jsx)("header",{className:Fe,children:(0,X.jsxs)("div",{className:Ve,children:[(0,X.jsx)(ke,{}),(0,X.jsx)(Me,{})]})});const He="QcyAwWrXP4IvTyugCBDk",qe="zwrmBObIHf75VWaw38yw";var Je,Ke=e=>{var{children:r}=e;return(0,X.jsxs)("div",{className:He,children:[(0,X.jsx)(Ge,{}),(0,X.jsx)("main",{className:qe,children:r})]})};function Ye(){return Ye=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},Ye.apply(this,arguments)}var We=function(e){return o.createElement("svg",Ye({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},e),Je||(Je=o.createElement("path",{d:"M15.5 14h-.79l-.28-.27A6.47 6.47 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"})))};t.p;var Qe;function Xe(){return Xe=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},Xe.apply(this,arguments)}var ze=function(e){return o.createElement("svg",Xe({xmlns:"http://www.w3.org/2000/svg",width:32,height:32,fill:"currentColor"},e),Qe||(Qe=o.createElement("path",{fill:"inherit",d:"M23.66 6.96 16 14.63 8.32 6.96 6.95 8.33 14.62 16l-7.67 7.67 1.37 1.37 7.67-7.68 7.67 7.68 1.37-1.37L17.36 16l7.67-7.67z"})))};t.p;const Ze="kIwoKeY1ahkooJTXbu5k",$e="kioBQlhTvvd5Aum2TU03",er="XsniiaeK_STDgsIj1Oog",rr="ajFuQufx5wCXf2dNC1RP";var tr=e=>{var{onSubmit:r}=e,t=l(),[n,a]=(0,o.useState)(""),s=(0,o.useRef)(null),i=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=(0,o.useRef)();function a(){n.current&&(clearTimeout(n.current),n.current=void 0)}return(0,o.useEffect)((()=>t?a:void 0),[t]),function(){for(var t=arguments.length,s=new Array(t),i=0;i<t;i++)s[i]=arguments[i];a(),n.current=setTimeout((()=>e(...s)),r)}}((e=>t(P(e))),500,!0);return(0,o.useEffect)((()=>()=>{t(w())}),[t]),(0,X.jsxs)("form",{className:Ze,onSubmit:function(e){e.preventDefault(),r(n)},name:"search",children:[(0,X.jsx)("input",{className:$e,ref:s,value:n,placeholder:"Find a photo for you",onChange:function(e){a(e.target.value),i(e.target.value)}}),n&&(0,X.jsx)("button",{className:er,type:"button","aria-label":"clear input",onClick:function(){var e;a(""),t(w()),null===(e=s.current)||void 0===e||e.focus()},children:(0,X.jsx)(ze,{})}),(0,X.jsx)("button",{type:"submit",className:rr,disabled:!n.length,"aria-label":"Search",children:(0,X.jsx)(We,{})})]})};const nr="nlWODRnelZwk8H1WSwb3",ar="tRTLbVEQAzT1QRMCc1PM",sr="CdPc0hE8Dg8KmcnLx3cE",ir="kmzUaLH__6hRQyiA0kIw",or="Ys99cJte9zU9W_qELMT5",cr="XAST3IQBuGPp_yosKtEo",lr="maDGhwQedZYPPrckXRM1";var ur=e=>{var{id:r,alt_description:t="no description",thumb:n,owner:a,likes:i=0}=e;return(0,X.jsxs)("article",{className:nr,children:[(0,X.jsx)(s.rU,{to:"/card?id=".concat(r),className:ar}),(0,X.jsx)("div",{className:sr,children:(0,X.jsx)("img",{src:n,alt:t})}),(0,X.jsx)("h2",{className:cr,children:t}),(0,X.jsx)("p",{className:or,children:"by ".concat(a)}),(0,X.jsxs)("p",{className:ir,children:[(0,X.jsx)("span",{role:"img","aria-label":"heart",children:"❤️"})," ",i]}),(0,X.jsx)("span",{className:lr,children:"→"})]})};const dr="TD1HD6cN_5HU7pXRZlxa",hr="PQyGLGo76sk88jGeFpf5",vr="cIBHfP8MjIO0mJykMJa2",fr="E8ykriKZvDPoO7oOFtns";var pr=e=>{var{photos:r,visible:t,errorMessage:n=""}=e,a=r.map((e=>{var{id:r,alt_description:t,urls:n,user:a,likes:s}=e;return(0,X.jsx)("li",{children:(0,X.jsx)(ur,{id:r,alt_description:t,thumb:n.thumb,owner:a.name,likes:s})},r)}));return(0,X.jsx)("div",{className:"".concat(dr," ").concat(t&&vr),id:"bar","aria-label":"Suggestions Bar",children:n?(0,X.jsx)("p",{className:fr,children:n}):(0,X.jsx)("ul",{className:hr,children:a})})};const mr="lkajQKCidxJ9BGKaIToL";function jr(e,r,t,n,a,s,i){try{var o=e[s](i),c=o.value}catch(e){return void t(e)}o.done?r(c):Promise.resolve(c).then(n,a)}var yr=()=>{var e=l(),r=u(C),[t,n]=(0,o.useState)(!1),[a,s]=(0,o.useState)([]),[c,d]=(0,o.useState)(""),{isAuth:h}=L(),{searchValue:v,countPerPage:f}=u((e=>e.search)),p=function(){var t,a=(t=function*(t){if(n(!1),Y({query:t,per_page:f,page:1}).then((r=>{var{results:t,total_pages:n}=r;e(y(t)),e(S(n))})).catch((e=>{i.Am.error("Request error ",e)})),h)try{yield(0,te.pl)((0,te.JU)(ue,"users/".concat(r,"/searchHistory"),t),{searchValue:t})}catch(e){i.Am.error("Error adding a search parameter ",e)}},function(){var e=this,r=arguments;return new Promise((function(n,a){var s=t.apply(e,r);function i(e){jr(s,n,a,i,o,"next",e)}function o(e){jr(s,n,a,i,o,"throw",e)}i(void 0)}))});return function(e){return a.apply(this,arguments)}}(),m=e=>{d("string"==typeof e?e:"An error occurred during the request. Please try again later."),s([])};return(0,o.useEffect)((()=>{d(""),v&&K({count:5,query:v}).then((e=>{s(e)})).catch(m).finally((()=>n(!0)))}),[v]),(0,o.useEffect)((()=>{var e=e=>{t&&!e.target.closest("section")&&n(!1)};return t&&document.addEventListener("click",e),()=>{document.removeEventListener("click",e)}}),[t]),(0,X.jsxs)("section",{className:mr,children:[(0,X.jsx)(tr,{onSubmit:p}),(0,X.jsx)(pr,{photos:a,visible:t&&v.length>0,errorMessage:c})]})};const gr={cardPage:"KJtAPu_Cnoijkj2S0QAw",cardInfo:"EklOGZMCgGTOhK40Q9k1",cardImage:"pSlmUVy_0sa_pz0wteQ8",cardDescription:"BGgAqLKXk42y7c0JtmYV",title:"SNoz5zU2p4uwGAeFtlH9",extraInfo:"NY1lFrOd_RJg2i6XJyF9",author:"sdxTcX9qj5tOfomBr9vr",location:"gw3XbhzPk7uJmk3A_wAh",othersPosts:"HqW1R4WykOyRHOIjfeYS",posts:"vppp4ePSNtO_JmfkMC7e"};function br(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function xr(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?br(Object(t),!0).forEach((function(r){Or(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):br(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function Or(e,r,t){return(r=function(e){var r=function(e,r){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,r||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"==typeof r?r:String(r)}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function Pr(e,r,t,n,a,s,i){try{var o=e[s](i),c=o.value}catch(e){return void t(e)}o.done?r(c):Promise.resolve(c).then(n,a)}function wr(){var e,r,t,n,a=(0,c.TH)(),s=u(C),[l,d]=(0,o.useState)(null),[h,v]=(0,o.useState)(null),{isAuth:f}=L(),p=(0,o.useCallback)(function(){var e,r=(e=function*(e){var r,t=yield q(e);if(d(t),f)try{yield(0,te.pl)((0,te.JU)(ue,"users/".concat(s,"/cardsHistory"),e),xr({},t))}catch(e){i.Am.error("Error when adding a card to the history ",e)}var n=null!=t&&t.topics?null==t||null===(r=t.topics[0])||void 0===r?void 0:r.id:"",a=yield K({topics:n,orientation:"portrait",count:20});v(a)},function(){var r=this,t=arguments;return new Promise((function(n,a){var s=e.apply(r,t);function i(e){Pr(s,n,a,i,o,"next",e)}function o(e){Pr(s,n,a,i,o,"throw",e)}i(void 0)}))});return function(e){return r.apply(this,arguments)}}(),[f,s]);return(0,o.useLayoutEffect)((()=>{var e=new URLSearchParams(window.location.search).get("id");p(e)}),[a,p]),(0,X.jsxs)("div",{className:gr.cardPage,children:[l&&(0,X.jsxs)("section",{className:gr.cardInfo,children:[(0,X.jsx)("div",{className:gr.cardImage,children:(0,X.jsx)("img",{src:null==l||null===(e=l.urls)||void 0===e?void 0:e.regular,alt:""})}),(0,X.jsxs)("div",{className:gr.cardDescription,children:[(0,X.jsx)("div",{className:gr.title,children:(0,X.jsx)("h2",{children:null==l?void 0:l.description})}),(0,X.jsxs)("div",{className:gr.extraInfo,children:[(0,X.jsx)("div",{className:gr.author,children:null==l||null===(r=l.user)||void 0===r?void 0:r.name}),(0,X.jsx)("div",{className:gr.location,children:null!=l&&null!==(t=l.location)&&void 0!==t&&t.country?(0,X.jsxs)(X.Fragment,{children:[null==l||null===(n=l.location)||void 0===n?void 0:n.country,l.location.city?", ".concat(l.location.city):""]}):"Unknown location"})]})]})]}),(0,X.jsxs)("section",{className:gr.othersPosts,children:[(0,X.jsx)("h2",{children:"You might like it"}),(0,X.jsx)("ul",{className:gr.posts,children:h&&h.map((e=>(0,X.jsx)("li",{children:(0,X.jsx)(Oe,xr({},e),e.id)},e.id)))})]})]})}const Sr=()=>{var[e,r]=(0,o.useState)([]),t=u(C),[n,a]=(0,o.useState)(!1);return(0,o.useEffect)((()=>{a(!0);var e=(0,te.cf)((0,te.hJ)(ue,"users/".concat(t,"/favorites")),(e=>{var t=e.docs.map((e=>e.data()));r(t),a(!1)}));return()=>e()}),[t]),(0,X.jsxs)(X.Fragment,{children:[n&&(0,X.jsx)(Re,{}),!n&&e.length>0&&(0,X.jsx)(we,{cards:e}),!n&&0===e.length&&(0,X.jsx)("h2",{children:"You have no favorites"})]})},Nr="pPh_NehCXtCFi_LohmYs",Ar="l95BRPKEVIyt8nDldYrk",Er="InkDZAmtBilwy3VDHLQl",_r="roH2Kf9mWOSSQ9riCFVc",kr="XlkSyiFtif7y4fJ2_5Ct",Ir="WYKHJaYO1N1tQRP4PnDm";function Cr(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function Dr(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?Cr(Object(t),!0).forEach((function(r){Rr(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Cr(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function Rr(e,r,t){return(r=function(e){var r=function(e,r){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,r||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"==typeof r?r:String(r)}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function Tr(e,r,t,n,a,s,i){try{var o=e[s](i),c=o.value}catch(e){return void t(e)}o.done?r(c):Promise.resolve(c).then(n,a)}const Ur=function(){var e=l(),r=(0,c.s0)(),[t,n]=(0,o.useState)([]),[a,s]=(0,o.useState)([]),d=u(C),[h,v]=(0,o.useState)(!1);(0,o.useEffect)((()=>{v(!0);var e=(0,te.cf)((0,te.hJ)(ue,"users/".concat(d,"/cardsHistory")),(e=>{var r=e.docs.map((e=>e.data()));n(r.reverse()),v(!1)})),r=(0,te.cf)((0,te.hJ)(ue,"users/".concat(d,"/searchHistory")),(e=>{var r=e.docs.map((e=>e.data()));s(r.reverse()),v(!1)}));return()=>{e(),r()}}),[d]);var f=function(){var t,n=(t=function*(t){Y({query:t,per_page:20}).then((r=>{e(y(r.results))})).catch((e=>{i.Am.error("Request error ",e)})).finally((()=>r("/")))},function(){var e=this,r=arguments;return new Promise((function(n,a){var s=t.apply(e,r);function i(e){Tr(s,n,a,i,o,"next",e)}function o(e){Tr(s,n,a,i,o,"throw",e)}i(void 0)}))});return function(e){return n.apply(this,arguments)}}();return h?(0,X.jsx)(Re,{}):(0,X.jsxs)(X.Fragment,{children:[(0,X.jsxs)("section",{className:Nr,children:[(0,X.jsx)("h2",{children:"Cards you've looked at"}),null!=t&&t.length?(0,X.jsx)("ul",{className:Er,children:t.map(((e,r)=>(0,X.jsx)("li",{children:(0,X.jsx)(Oe,Dr({},e))},r)))}):(0,X.jsx)("p",{className:Ir,children:"You haven't looked at any cards yet"})]}),(0,X.jsxs)("section",{className:Ar,children:[(0,X.jsx)("h2",{children:"Search history"}),null!=a&&a.length?(0,X.jsx)("ul",{className:_r,children:a.map(((e,r)=>(0,X.jsx)("li",{className:kr,onClick:()=>f(e.searchValue),children:e.searchValue},r)))}):(0,X.jsx)("p",{className:Ir,children:"You haven't searched for anything yet"})]})]})},Lr="GRbRIY8KlgqcpHaT1A6O";var Br=()=>{var e=l(),{cardsData:r}=u((e=>e.cards)),{countPerPage:t}=u((e=>e.search)),[n,a]=(0,o.useState)(!1);return function(){var e=l(),[r,t]=(0,o.useState)(2),[n,a]=(0,o.useState)(!1),{searchValue:s,countPerPage:i,totalPages:c}=u((e=>e.search)),d=(0,o.useCallback)(Q((function*(){var n;if(s){var{results:o}=yield Y({query:s,page:r,per_page:i});n=o}else n=yield J({page:r,per_page:i});e(g(n)),t((e=>e+1)),a(!1)})),[e,r,s,i]);(0,o.useEffect)((()=>{if(n){if(c&&c<r)return void a(!1);d()}}),[n,d,r,c]),(0,o.useEffect)((()=>(document.addEventListener("scroll",h),function(){document.removeEventListener("scroll",h)})),[]);var h=e=>{e.target.documentElement.scrollHeight-(e.target.documentElement.scrollTop+window.innerHeight)<100&&a(!0)}}(),(0,o.useEffect)((()=>{r.length||(a(!0),J({page:1,per_page:t}).then((r=>{e(y(r))})).catch((e=>{i.Am.error("Request error ",e)})).finally((()=>{a(!1)})))}),[r.length,e,t]),(0,X.jsxs)("div",{className:Lr,children:[(0,X.jsx)(yr,{}),n&&(0,X.jsx)(Re,{}),!n&&r.length>0&&(0,X.jsx)(we,{cards:r})]})},Mr=()=>{var e=l(),r=(0,c.s0)();return(0,X.jsx)(Ne,{title:"Sign In",handleSubmit:(t,n)=>{(0,ie.e5)(le,t,n).then((t=>{var{user:n}=t;e(E({email:n.email,id:n.uid,token:n.refreshToken})),r("/")})).catch((e=>i.Am.error("Incorrect email or password",e)))}})},Fr=()=>{var{isAuth:e}=L(),r=(0,c.s0)();return e&&r("/"),(0,X.jsxs)("div",{className:"authContainer",children:[(0,X.jsx)("h1",{children:"Login"}),(0,X.jsx)(Mr,{}),(0,X.jsxs)("p",{children:["Don't have an account? ",(0,X.jsx)(s.rU,{to:"/register",children:"Register here"})]})]})};const Vr="vrNuVB8A4modZMRW46_n",Gr="MDaoXD0zx4g0qVFozIpL",Hr="b_1Zox2nlTI8sv7BKEX4",qr="KT2lhf6TUn2ZuPUOuFME",Jr="d44UssZEHzOGhqUKsckQ";var Kr=()=>{var e=(0,c.s0)();return(0,X.jsxs)("section",{className:Vr,children:[(0,X.jsx)("p",{className:Gr,children:"404"}),(0,X.jsx)("h2",{className:Hr,children:"Page not found"}),(0,X.jsx)("nav",{children:(0,X.jsxs)("ul",{className:qr,children:[(0,X.jsx)("li",{children:(0,X.jsx)("button",{onClick:()=>e(-1),className:Jr,type:"button",children:"Back"})}),(0,X.jsx)("li",{children:(0,X.jsx)("button",{onClick:()=>e("/",{replace:!0}),className:Jr,type:"button",children:"Main page"})})]})})]})},Yr=()=>{var e=l(),r=(0,c.s0)();return(0,X.jsx)(Ne,{title:"Sign Out",handleSubmit:(t,n)=>{(0,ie.Xb)(le,t,n).then((t=>{var{user:n}=t;e(E({email:n.email,id:n.uid,token:n.refreshToken})),r("/")})).catch((e=>i.Am.error("Incorrect email or password ",e)))}})},Wr=()=>{var{isAuth:e}=L(),r=(0,c.s0)();return e&&r("/"),(0,X.jsxs)("div",{className:"authContainer",children:[(0,X.jsx)("h1",{children:"Register"}),(0,X.jsx)(Yr,{}),(0,X.jsxs)("p",{children:["Already have an account? ",(0,X.jsx)(s.rU,{to:"/login",children:"Sign in"})]})]})},Qr=(0,h.hg)("auth/checkAuth",((e,r)=>{var{dispatch:t}=r;(0,ie.Aj)(le,(e=>t(e?f({email:e.email,uid:e.uid}):p())))}));const Xr=function(){var e=l(),r=u(R);return(0,o.useEffect)((()=>{e(Qr())}),[e]),"LOADING"===r?(0,X.jsx)(Re,{fullscreen:!0}):(0,X.jsx)(Ke,{children:(0,X.jsxs)(c.Z5,{children:[(0,X.jsx)(c.AW,{path:"/",element:(0,X.jsx)(Br,{})}),(0,X.jsx)(c.AW,{path:"/login",element:(0,X.jsx)(Fr,{})}),(0,X.jsx)(c.AW,{path:"/register",element:(0,X.jsx)(Wr,{})}),(0,X.jsx)(c.AW,{path:"/card",element:(0,X.jsx)(wr,{})}),(0,X.jsx)(c.AW,{path:"/favorites",element:(0,X.jsx)(re,{component:Sr})}),(0,X.jsx)(c.AW,{path:"/history",element:(0,X.jsx)(re,{component:Ur})}),(0,X.jsx)(c.AW,{path:"*",element:(0,X.jsx)(Kr,{})})]})})};(0,n.s)(document.getElementById("root")).render((0,X.jsx)(a.zt,{store:U,children:(0,X.jsxs)(s.VK,{basename:"dist",children:[(0,X.jsx)(i.Ix,{theme:"dark",autoClose:2e3}),(0,X.jsx)(Xr,{})]})}))}},a={};function s(e){var r=a[e];if(void 0!==r)return r.exports;var t=a[e]={exports:{}};return n[e](t,t.exports,s),t.exports}s.m=n,e=[],s.O=(r,t,n,a)=>{if(!t){var i=1/0;for(u=0;u<e.length;u++){for(var[t,n,a]=e[u],o=!0,c=0;c<t.length;c++)(!1&a||i>=a)&&Object.keys(s.O).every((e=>s.O[e](t[c])))?t.splice(c--,1):(o=!1,a<i&&(i=a));if(o){e.splice(u--,1);var l=n();void 0!==l&&(r=l)}}return r}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[t,n,a]},t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,s.t=function(e,n){if(1&n&&(e=this(e)),8&n)return e;if("object"==typeof e&&e){if(4&n&&e.__esModule)return e;if(16&n&&"function"==typeof e.then)return e}var a=Object.create(null);s.r(a);var i={};r=r||[null,t({}),t([]),t(t)];for(var o=2&n&&e;"object"==typeof o&&!~r.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach((r=>i[r]=()=>e[r]));return i.default=()=>e,s.d(a,i),a},s.d=(e,r)=>{for(var t in r)s.o(r,t)&&!s.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:r[t]})},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;s.g.importScripts&&(e=s.g.location+"");var r=s.g.document;if(!e&&r&&(r.currentScript&&(e=r.currentScript.src),!e)){var t=r.getElementsByTagName("script");if(t.length)for(var n=t.length-1;n>-1&&!e;)e=t[n--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),s.p=e+"../"})(),(()=>{var e={143:0};s.O.j=r=>0===e[r];var r=(r,t)=>{var n,a,[i,o,c]=t,l=0;if(i.some((r=>0!==e[r]))){for(n in o)s.o(o,n)&&(s.m[n]=o[n]);if(c)var u=c(s)}for(r&&r(t);l<i.length;l++)a=i[l],s.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return s.O(u)},t=self.webpackChunkgallery=self.webpackChunkgallery||[];t.forEach(r.bind(null,0)),t.push=r.bind(null,t.push.bind(t))})();var i=s.O(void 0,[187],(()=>s(82)));i=s.O(i)})();
//# sourceMappingURL=b41476a444e77a31d6aa.js.map